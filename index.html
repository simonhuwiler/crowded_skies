<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Über den Wolken - So ist der Luftraum über der Schweiz organisiert</title>
  <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.46.0/mapbox-gl.js'></script>
  <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.46.0/mapbox-gl.css' rel='stylesheet' />
  <script src="lib/three.min.js" defer="true"></script>
  <script src="lib/THREE.MeshLine.js" defer="true"></script>
  <script src="lib/TrailRenderer.js" defer="true"></script>
  <script src="https://code.jquery.com/jquery-3.3.1.min.js" defer="true"></script>
  <script src="lib/turf.min.js" defer="true"></script>
  <script src="lib/tween.min.js" defer="true"></script>
  <script src="js/main.js" defer="true"></script>

  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="css/main.css">

  <!-- RAUS!!! -->
  <script src="lib/OrbitControls.js" defer="true"></script>


  <style>
    canvas { width: 100%; height: 100% }
  </style>
</head>
<body>
  <script type="x-shader/x-vertex" id="vertexShader">

    varying vec3 vWorldPosition;

    void main() {

      vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
      vWorldPosition = worldPosition.xyz;

      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }

  </script>

  <script type="x-shader/x-fragment" id="fragmentShader">

    uniform vec3 topColor;
    uniform vec3 bottomColor;
    uniform float offset;
    uniform float exponent;

    varying vec3 vWorldPosition;

    void main() {

      float h = normalize( vWorldPosition + offset ).y;
      gl_FragColor = vec4( mix( bottomColor, topColor, max( pow( max( h , 0.0), exponent ), 0.0 ) ), 1.0 );

    }

  </script>

  <div style="position: fixed; z-index:10000; top:0px;">
    <button id='render'>Render</button>
    <button id="doit">Do it</button>
    <button id="doitback">Do it back</button>
    <button id="kippen">kippen</button>
    <button id="count">+1</button>
    <button id="play">play</button>
    <button id="play2">play2</button>
    <button class="move_camera" data-x=0.1 data-y=0>^</button>
    <button class="move_camera" data-x=-0.1 data-y=0>v</button>
    <button class="move_camera" data-x=0 data-y=0.1><</button>
    <button class="move_camera" data-x=0 data-y=-0.1>></button>
    <button id="rendertarget_1">1</button>
    <button id="rendertarget_2">2</button>
    <button id="cameratest">cameratest</button>
  </div>

  <div id="wait_after_locate" class="please_wait content_box">
    <h2>Danke!</h2>
    Wir bereiten noch kurz etwas für Sie vor...
  </div>

  <div id="timeline">
    <img src="img/timeline.png">
    <div id="timeline_point"></div>
  </div>
  
  <div id="fixchart"></div>

  <div id="content">
    <div class="chapter">
      <div class="chapter_content content_box">
        <h2 class="has_place">Hallo nach {place_name}!</h2>
        <h2 class="has_no_place">Hallo!</h2>
        <span class="has_place">Es soll schön sein in der Umgebung von {place_name}! Doch richten wir den Blick gegen den Himmel. Wie sieht der Himmel über {place_name} aus?</span>         
        <span class="has_no_place">Es soll schön sein an Ihrem gewählten Ort. Doch richten wir den Blick gegen den Himmel. Doch wie sieht der Himmel an Ihrem Ort aus?</span>
        Scrollen du musst!
      </div>
    </div>
    <div id="chapter_startTHREE" class="chapter">
      <div class="chapter_content content_box">
        <h2>Highways</h2>
        <span class="has_place">Über {place_name} zeigt sich ein dichtes Netz von Flugrouten.</span>
        <span class="has_no_place">Am Himmel zeigt sich ein dichtes Netz von Flugrouten.</span>
        Hier dargestellt: Die Super-Autobahnen, jene Flugrouten, über die der meiste Passagierverkehr gelotst wird. Egal ob ein Airliner die Schweiz nur durchqueren oder in der Schweiz landen will, auf eine dieser Routen muss er sich einreihen. Und wie auf der Strasse führt jede Spur nur in eine Richtung.
      </div>
    </div>
    <div class="chapter">
      <div class="chapter_content content_box">
        <h2>Nachtflugverbot</h2>
        <span class="has_place">Noch ist es aber ruhig in {place_name}.</span>
        <span class="has_no_place">Noch ist es aber ruhig.</span>
        Das Nachtflugverbot gilt zwischen 23 Uhr Abends und 6 Uhr Morgens. In dieser Zeit darf nur mit Ausnahme auf Schweizer Flughäfen gelandet oder gestartet werden. Um sechs Uhr ist es dann soweit, die ersten Jets heben ab. Lassen wir die Flugzeuge starten.
      </div>
    </div>

    <div id="chapter_timelaps_slow" class="chapter">
      <div class="chapter_content content_box clearfix">
        <img src="img/flugbewegungen.jpg" class="imageright">
        54'911'905 Passagiere haben Schweizer Flughäfen 2017 transportiert. Das sind 60 Prozent mehr als im Jahr 2000. 460'000 Landungen und Starts in einem Jahr! Am meisten Starts und Landungen verzeichnen die drei Flughäfen Zürich, Genf und Basel-Mulhouse.
      </div>
    </div>

    <div id="chapter_airport_1" class="chapter">
      <div class="chapter_content content_box">

        <!-- Zurich -->
        <div class="airport_zurich clearfix">
          <img src="img/airport_shape_zurich.jpg" class="imageright">
          <h2>Das Fenster in die Ferne</h2>
          <span class="has_place">Am nächsten von {place_name} entfernt liegt der Flughafen Zürich. Etwa {airport_1_distance}km trennen {place_name} vom Flughafen.</span>
          <span class="has_no_place">Am nächsten liegt der Flughafen Zürich. Etwa {airport_1_distance}km sind es von hier bis zum Flughafen.</span>
          An Spitzentagen während der Sommerferien gehen rund 750 Linien- oder Charterflüge von Zürich weg. Über das Jahr sind es durchschnittlich 650 Flüge.
        </div>
        
        <!-- Genf -->
        <div class="airport_geneva clearfix">
          <img src="img/airport_shape_geneva.jpg" class="imageright">
          <h2>Die Nummer zwei</h2>
          <span class="has_place">Am nächsten von {place_name} entfernt liegt der Flughafen Genf. Etwa {airport_1_distance}km trennen {place_name} vom Flughafen.</span>
          <span class="has_no_place">Am nächsten liegt der Flughafen Genf. Etwa {airport_1_distance}km sind es von hier bis zum Flughafen.</span>
          An Spitzentagen während der Sommerferien gehen rund 316 Linien- oder Charterflüge von Zürich weg. Über das Jahr sind es durchschnittlich 259 Flüge.
        </div>
        
        <!-- Basel -->
        <div class="airport_bale clearfix">
          <img src="img/airport_shape_bale.jpg" class="imageright">
          <h2>Die Nummer drei</h2>
          <span class="has_place">Am nächsten von {place_name} entfernt liegt der Flughafen Basel-Mulhouse. Etwa {airport_1_distance}km trennen {place_name} vom Flughafen.</span>
          <span class="has_no_place">Am nächsten liegt der Flughafen Basel-Mulhouse. Etwa {airport_1_distance}km sind es von hier bis zum Flughafen.</span>
          An Spitzentagen während der Sommerferien gehen rund 110 Linien- oder Charterflüge von Zürich weg. Über das Jahr sind es durchschnittlich 95 Flüge.
        </div>

      </div>
    </div>

    <div class="chapter airport_destination_1">
      <div class="chapter_content content_box">

        <!-- Zurich -->
        <div class="airport_zurich">
          <h2>Von Zürich nach London</h2>
          <p>London und Berlin sind die europäischen Top-Destinationen, welche vom Flughafen Zürich aus angeflogen werden. Über 850'000 Personen haben die englische Hauptstadt besucht. Nach Berlin zog es über 540'000 Personen. Übersee sind New York und Dubai die beliebtesten Reiseziele.</p>
          <p><img src="img/airport_target_zurich.png" class="imagecenter"></p>
        </div>

        <!-- Bale -->
        <div class="airport_bale">
          <h2>Von Basel nach Algier</h2>
          <p>London und Berlin sind die europäischen Top-Destinationen, welche vom Flughafen Basel-Mulhouse aus angeflogen werden. Über 270'000 Personen haben die englische Hauptstadt besucht. Nach Berlin zog es über 540'000 Personen. Übersee liegt Algier, die Hauptstadt Algeriens, gefolgt von Tel Aviv und Marrakesch auf den Top-Plätzen.</p>
          <p><img src="img/airport_target_bale.png" class="imagecenter"></p>
        </div>

        <!-- Geneva -->
        <div class="airport_geneva">
          <h2>Von Genf nach Dubai</h2>
          <p>London und Paris sind die europäischen Top-Destinationen, welche vom Flughafen Genf aus angeflogen werden. Über eine Million Personen haben die englische Hauptstadt besucht. Nach Paris zog es über 530'000 Personen. Übersee sind Dubai und New York die beliebtesten Reiseziele.</p>
          <p><img src="img/airport_target_geneva.png" class="imagecenter"></p>
        </div>

      </div>
    </div>

    <div id="chapter_airport_2" class="chapter">
      <div class="chapter_content content_box">

        <!-- Zurich -->
        <div class="airport_zurich clearfix">
          <img src="img/airport_shape_zurich.jpg" class="imageright">
          <h2>Das Fenster in die Ferne</h2>
          <span class="has_place">Am zweitnächsten von {place_name} entfernt liegt der Flughafen Zürich. Etwa {airport_2_distance}km trennen {place_name} vom Flughafen.</span>
          <span class="has_no_place">Am zweitnächsten liegt der Flughafen Zürich. Etwa {airport_2_distance}km sind es von hier bis zum Flughafen.</span>
          An Spitzentagen während der Sommerferien gehen rund 750 Linien- oder Charterflüge von Zürich weg. Über das Jahr sind es durchschnittlich 650 Flüge.
        </div>
        
        <!-- Genf -->
        <div class="airport_geneva clearfix">
          <img src="img/airport_shape_geneva.jpg" class="imageright">
          <h2>Die Nummer zwei</h2>
          <span class="has_place">Am zweitnächsten von {place_name} entfernt liegt der Flughafen Genf. Etwa {airport_2_distance}km trennen {place_name} vom Flughafen.</span>
          <span class="has_no_place">Am zweitnächsten liegt der Flughafen Genf. Etwa {airport_2_distance}km sind es von hier bis zum Flughafen.</span>
          An Spitzentagen während der Sommerferien gehen rund 316 Linien- oder Charterflüge von Zürich weg. Über das Jahr sind es durchschnittlich 259 Flüge.
        </div>
        
        <!-- Basel -->
        <div class="airport_bale clearfix">
            <img src="img/airport_shape_bale.jpg" class="imageright">
            <h2>Die Nummer drei</h2>
            <span class="has_place">Am zweitnächsten von {place_name} entfernt liegt der Flughafen Basel-Mulhouse. Etwa {airport_2_distance}km trennen {place_name} vom Flughafen.</span>
            <span class="has_no_place">Am zweitnächsten liegt der Flughafen Basel-Mulhouse. Etwa {airport_2_distance}km sind es von hier bis zum Flughafen.</span>
            An Spitzentagen während der Sommerferien gehen rund 110 Linien- oder Charterflüge von Zürich weg. Über das Jahr sind es durchschnittlich 95 Flüge.
          </div>
      </div>
    </div>

    <div class="chapter airport_destination_2">
      <div class="chapter_content content_box">

        <!-- Zurich -->
        <div class="airport_zurich">
          <h2>Von Zürich nach London</h2>
          <p>London und Berlin sind die europäischen Top-Destinationen, welche vom Flughafen Zürich aus angeflogen werden. Über 850'000 Personen haben die englische Hauptstadt besucht. Nach Berlin zog es über 540'000 Personen. Übersee sind New York und Dubai die beliebtesten Reiseziele.</p>
          <p><img src="img/airport_target_zurich.png" class="imagecenter"></p>
        </div>

        <!-- Bale -->
        <div class="airport_bale">
          <h2>Von Basel nach Algier</h2>
          <p>London und Berlin sind die europäischen Top-Destinationen, welche vom Flughafen Basel-Mulhouse aus angeflogen werden. Über 270'000 Personen haben die englische Hauptstadt besucht. Nach Berlin zog es über 540'000 Personen. Übersee liegt Algier, die Hauptstadt Algeriens, gefolgt von Tel Aviv und Marrakesch auf den Top-Plätzen.</p>
          <p><img src="img/airport_target_bale.png" class="imagecenter"></p>
        </div>

        <!-- Geneva -->
        <div class="airport_geneva">
          <h2>Von Genf nach Dubai</h2>
          <p>London und Paris sind die europäischen Top-Destinationen, welche vom Flughafen Genf aus angeflogen werden. Über eine Million Personen haben die englische Hauptstadt besucht. Nach Paris zog es über 530'000 Personen. Übersee sind Dubai und New York die beliebtesten Reiseziele.</p>
          <p><img src="img/airport_target_geneva.png" class="imagecenter"></p>
        </div>

      </div>
    </div>


    <div class="chapter">
      <div class="chapter_content content_box airways_intro">
        <span class="has_place">Über {place_name} führen verschiedene Luftrouten in die weite Welt hinaus.</span>
        <span class="has_no_place">Über Ihrem Ort führen verschiedene Luftrouten in die weite Welt hinaus.</span>
        Am nächsten liegt die <b>{airway_1_name}</b>. Nur etwa {airway_1_distance}km entfernt ist sie. Auch die <b>{airway_2_name}</b> liegt mit {airway_2_distance}km in Ihrer Nähe. Auch in Ihrer Umgebung, aber etwas weiter entfernt: Die {airway_3_distance}km entfernt liegende <b>{airway_3_name}</b>.<br />
        Schauen wir uns die drei Strassen genauer an.
      </div>
    </div>

    <div id="chapter_nearest_airway_0" class="chapter chapter_airways_0">
      <div class="chapter_content content_box">
        <h2><span class="label_route">NR</span><span class="route_title">Route 1</span></h2>
        <span class="route_text">Text Route 1</span>
      </div>
    </div>

    <div id="chapter_nearest_airway_1" class="chapter chapter_airways_1">
      <div class="chapter_content content_box">
        <h2><span class="label_route">NR</span><span class="route_title">Route 2</span></h2>
        <span class="route_text">Text Route 1</span>
      </div>
    </div>

    <div id="chapter_nearest_airway_2" class="chapter chapter_airways_2">
      <div class="chapter_content content_box">
        <h2><span class="label_route">NR</span><span class="route_title">Route 3</span></h2>
        <span class="route_text">Text Route 1</span>
      </div>
    </div>

    <div id="chapter_after_airways" class="chapter">
      <div class="chapter_content content_box">
        <h2>Luftrouten</h2>
        Der gesamte Schweizer wie auch internationale Luftverkehr funktioniert in sogenannten Flight Levels (FL) und auf festgelegten Luftrouten. Wie auf einer unsichtbaren Autobahn reihen sich Flugzeuge auf einem ihnen zugewiesenen Flight Level in die Luftroute ein. Die Mindestabstände (Staffelungen) dürfen keinesfalls unterschritten werden, die geflogenen Abstände sind aber in den allermeisten Fällen viel grösser.
        <p><img src="img/flightlevels.png" class="imagecenter"></p>
      </div>
    </div>

    <div class="chapter">
      <div class="chapter_content content_box">
        <h2>Luftrouten</h2>
        Verschiedene Fluglotsen koordinieren und überwachen jährlich rund 1,2 Millionen Flugzeuge im Schweizer Luftraum. Bei uns ist diese Aufgabe besonders komplex, denn der Luftraum ist dicht beflogen und rund zwei Drittel aller Flüge befinden sich im Steig- oder Sinkflug.
        <p><img src="img/radarlosten.png" class="imagecenter"></p>
      </div>
    </div>

    <div id="chapter_show_lines" class="chapter">
      <div class="chapter_content content_box">
        Der Tag neigt sich dem Ende zu. Blieben alle Kondensstreifen der Flugzeuge eines Tages am Himmel stehen, würde ein dichtes Netz den Schweizer Himmel überziehen.
      </div>
    </div>

    <div id="chapter_load_heatmap" class="chapter">
      <div class="chapter_content content_box">
        Unsere Reise ist zu Ende. Ein Tag voller Flugbewegungen liegt vor Ihnen auf der Karte. Entdecken Sie diese selbst, in dem Sie die Karte bewegen oder vergrössern.
      </div>
    </div>

    <div class="chapter">lsdf</div>
    <div class="chapter">lsdf</div>
  </div>

  <div id="map">
    <div id="target">
      <span id="setPosition">Mit dieser Position starten</span>
    </div>
  </div>

  <div id="threejs"></div>

</body>
</html>