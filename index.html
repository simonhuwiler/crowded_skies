<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Über den Wolken - So ist der Luftraum über der Schweiz organisiert</title>
  <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.46.0/mapbox-gl.js'></script>
  <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.46.0/mapbox-gl.css' rel='stylesheet' />
  <script src="lib/three.min.js" defer="true"></script>
  <script src="lib/THREE.MeshLine.js" defer="true"></script>
  <script src="lib/TrailRenderer.js" defer="true"></script>
  <script src="https://code.jquery.com/jquery-3.3.1.min.js" defer="true"></script>
  <script src="lib/turf.min.js" defer="true"></script>
  <script src="lib/tween.min.js" defer="true"></script>
  <script src="js/main.js" defer="true"></script>

  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="css/main.css">

  <!-- RAUS!!! -->
  <script src="lib/OrbitControls.js" defer="true"></script>


  <style>
    canvas { width: 100%; height: 100% }
  </style>
</head>
<body>
  <script type="x-shader/x-vertex" id="vertexShader">

    varying vec3 vWorldPosition;

    void main() {

      vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
      vWorldPosition = worldPosition.xyz;

      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }

  </script>

  <script type="x-shader/x-fragment" id="fragmentShader">

    uniform vec3 topColor;
    uniform vec3 bottomColor;
    uniform float offset;
    uniform float exponent;

    varying vec3 vWorldPosition;

    void main() {

      float h = normalize( vWorldPosition + offset ).y;
      gl_FragColor = vec4( mix( bottomColor, topColor, max( pow( max( h , 0.0), exponent ), 0.0 ) ), 1.0 );

    }

  </script>

  <div id="wait_after_locate" class="please_wait content_box">
    <h2>Danke!</h2>
    Wir bereiten noch kurz etwas für Sie vor...
  </div>

  <div id="timeline">
    <img src="img/timeline.png">
    <div id="timeline_point"></div>
  </div>
  
  <div id="fixchart"></div>

  <div id="content">
    <div class="chapter">
      <div class="chapter_content content_box">
        <h2 class="has_place">Hallo nach {place_name}!</h2>
        <h2 class="has_no_place">Hallo!</h2>
 
        <span class="has_place">Stellen Sie sich vor, Sie liegen auf einer Wiese in {place_name}.</span>
        <span class="has_no_place">Stellen Sie sich vor, sie liegen auf einer Wiese an Ihrem gewählten Ort.</span>
        Ihr Blick richtet sich auf den blauen Himmel über Ihnen. Vereinzelt ziehen flockige Wolken am sonst strahlend blauen Himmel vorbei. Flugzeuge malen mit ihrem Pinsel aus Kondensstreifen auf die blaue Himmelsleinwand. Woher kommen diese Jets? Wohin gehen sie? Auf welchen Bahnen durchqueren sie die Schweiz?
        <br />
        
        <span class="has_place">Finden wir es gemeinsam heraus und beobachten wir für einen Tag den Himmel über {place_name}.</span>
        <span class="has_no_place">Finden wir es gemeinsam heraus und beobachten wir für einen Tag den Himmel.</span>
        <b>Scrollen du musst!</b>
      </div>
    </div>
    <div id="chapter_startTHREE" class="chapter">
      <div class="chapter_content content_box">
        <h2>Highways</h2>
        <span class="has_place">Über {place_name} zeigt sich ein dichtes Netz von Flugrouten.</span>
        <span class="has_no_place">Am Himmel zeigt sich ein dichtes Netz von Flugrouten.</span>
        Denn obwohl Flügel frei machen sollen, dürfen Passagierflugzeuge die Schweiz nicht nach belieben durchqueren. Farbig dargestellt sehen Sie die Super-Autobahnen über Ihnen, also jene Flugrouten, über die der meiste Passagierverkehr gelotst wird. Sei es nach Berlin, Mallorca oder Gran Canaria, auf eine dieser Strassen müssen sich die Jets einreihen. Damit sich die Jets nicht in die Quere kommen, führt jede Route nur in eine Richtung.
      </div>
    </div>
    <div class="chapter">
      <div class="chapter_content content_box">
        <h2>Nachtflugverbot</h2>
        <span class="has_place">Noch ist es aber ruhig über {place_name}.</span>
        <span class="has_no_place">Noch ist es aber ruhig.</span>
        Das Nachtflugverbot untersagt Flugzeugen, zwischen 23 Uhr Abends und 6 Uhr Morgens auf Schweizer Flughäfen zu landen oder zu starten. Um sechs Uhr ist es dann soweit, die ersten Jets schwingen sich in die Luft, ihrem entfernten Ziel entgegen. Lassen wir die Flugzeuge starten.
      </div>
    </div>

    <div id="chapter_timelaps_slow" class="chapter">
      <div class="chapter_content content_box clearfix">
        <img src="img/flugbewegungen.jpg" class="imageright">
        Momentan sehen Sie die Flugbewegungen eines vollen Tages im Schnelldurchlauf. Bevor wir uns die Strassen über Ihnen genauer anschauen, werfen wir den Blick auf den Ursprung jeder Flugreise: Den Flughafen. Im letzten Jahr haben Schweizer Flughäfen insgesamt 54'911'905 Passagiere transportiert. Das sind 60 Prozent mehr als im Jahr 2000. 460'000 Landungen und Starts in einem Jahr! Am meisten beansprucht werden die Pisten von Zürich, Genf und Basel-Mulhouse.
      </div>
    </div>

    <div id="chapter_airport_1" class="chapter">
      <div class="chapter_content content_box">

        <!-- Zurich -->
        <div class="airport_zurich clearfix">
          <img src="img/airport_shape_zurich.jpg" class="imageright">
          <h2>Das Fenster in die Ferne</h2>
          <span class="has_place">Am nächsten von {place_name} entfernt liegt der Flughafen Zürich. Etwa {airport_1_distance}km trennen {place_name} vom Gate.</span>
          <span class="has_no_place">Am nächsten liegt der Flughafen Zürich. Etwa {airport_1_distance}km sind es von hier bis zum Gate.</span>
          An Spitzentagen während der Sommerferien gehen rund 750 Linien- oder Charterflüge von Zürich weg. Über das Jahr sind es durchschnittlich 650 Flüge.
        </div>
        
        <!-- Genf -->
        <div class="airport_geneva clearfix">
          <img src="img/airport_shape_geneva.jpg" class="imageright">
          <h2>Die Nummer zwei</h2>
          <span class="has_place">Am nächsten von {place_name} entfernt liegt der Flughafen Genf. Etwa {airport_1_distance}km trennen {place_name} vom Gate.</span>
          <span class="has_no_place">Am nächsten liegt der Flughafen Genf. Etwa {airport_1_distance}km sind es von hier bis zum Gate.</span>
          An Spitzentagen während der Sommerferien gehen rund 316 Linien- oder Charterflüge von Genf weg. Über das Jahr sind es durchschnittlich 259 Flüge.
        </div>
        
        <!-- Basel -->
        <div class="airport_bale clearfix">
          <img src="img/airport_shape_bale.jpg" class="imageright">
          <h2>Die Nummer drei</h2>
          <span class="has_place">Am nächsten von {place_name} entfernt liegt der Flughafen Basel-Mulhouse. Etwa {airport_1_distance}km trennen {place_name} vom Gate.</span>
          <span class="has_no_place">Am nächsten liegt der Flughafen Basel-Mulhouse. Etwa {airport_1_distance}km sind es von hier bis zum Gate.</span>
          An Spitzentagen während der Sommerferien gehen rund 110 Linien- oder Charterflüge von Basel-Mulhouse weg. Über das Jahr sind es durchschnittlich 95 Flüge.
        </div>

      </div>
    </div>

    <div class="chapter airport_destination_1">
      <div class="chapter_content content_box">

        <!-- Zurich -->
        <div class="airport_zurich">
          <h2>Von Zürich nach London</h2>
          <p>London und Berlin sind die europäischen Top-Destinationen, welche vom Flughafen Zürich aus angeflogen werden. Über 850'000 Personen haben die englische Hauptstadt besucht. Nach Berlin zog es über 540'000 Personen. Übersee sind New York und Dubai die beliebtesten Reiseziele.</p>
          <p><img src="img/airport_target_zurich.png" class="imagecenter"></p>
        </div>

        <!-- Bale -->
        <div class="airport_bale">
          <h2>Von Basel nach Algier</h2>
          <p>London und Berlin sind die europäischen Top-Destinationen, welche vom Flughafen Basel-Mulhouse aus angeflogen werden. Über 270'000 Personen haben die englische Hauptstadt besucht. Nach Berlin zog es über 540'000 Personen. Übersee liegt Algier, die Hauptstadt Algeriens, gefolgt von Tel Aviv und Marrakesch auf den Top-Plätzen.</p>
          <p><img src="img/airport_target_bale.png" class="imagecenter"></p>
        </div>

        <!-- Geneva -->
        <div class="airport_geneva">
          <h2>Von Genf nach Dubai</h2>
          <p>London und Paris sind die europäischen Top-Destinationen, welche vom Flughafen Genf aus angeflogen werden. Über eine Million Personen haben die englische Hauptstadt besucht. Nach Paris zog es über 530'000 Personen. Übersee sind Dubai und New York die beliebtesten Reiseziele.</p>
          <p><img src="img/airport_target_geneva.png" class="imagecenter"></p>
        </div>

      </div>
    </div>

    <div id="chapter_airport_2" class="chapter">
      <div class="chapter_content content_box">

        <!-- Zurich -->
        <div class="airport_zurich clearfix">
          <img src="img/airport_shape_zurich.jpg" class="imageright">
          <h2>Das Fenster in die Ferne</h2>
          <span class="has_place">Am zweitnächsten von {place_name} entfernt liegt der Flughafen Zürich. Etwa {airport_2_distance}km trennen {place_name} vom Gate.</span>
          <span class="has_no_place">Am zweitnächsten liegt der Flughafen Zürich. Etwa {airport_1_distance}km sind es von hier bis zum Gate.</span>
          An Spitzentagen während der Sommerferien gehen rund 750 Linien- oder Charterflüge von Zürich weg. Über das Jahr sind es durchschnittlich 650 Flüge.
        </div>
        
        <!-- Genf -->
        <div class="airport_geneva clearfix">
          <img src="img/airport_shape_geneva.jpg" class="imageright">
          <h2>Die Nummer zwei</h2>
          <span class="has_place">Am zweitnächsten von {place_name} entfernt liegt der Flughafen Genf. Etwa {airport_2_distance}km trennen {place_name} vom Gate.</span>
          <span class="has_no_place">Am zweitnächsten liegt der Flughafen Genf. Etwa {airport_1_distance}km sind es von hier bis zum Gate.</span>
          An Spitzentagen während der Sommerferien gehen rund 316 Linien- oder Charterflüge von Genf weg. Über das Jahr sind es durchschnittlich 259 Flüge.
        </div>
        
        <!-- Basel -->
        <div class="airport_bale clearfix">
          <img src="img/airport_shape_bale.jpg" class="imageright">
          <h2>Die Nummer drei</h2>
          <span class="has_place">Am zweitnächsten von {place_name} entfernt liegt der Flughafen Basel-Mulhouse. Etwa {airport_2_distance}km trennen {place_name} vom Gate.</span>
          <span class="has_no_place">Am zweitnächsten liegt der Flughafen Basel-Mulhouse. Etwa {airport_1_distance}km sind es von hier bis zum Gate.</span>
          An Spitzentagen während der Sommerferien gehen rund 110 Linien- oder Charterflüge von Basel-Mulhouse weg. Über das Jahr sind es durchschnittlich 95 Flüge.
        </div>

      </div>
    </div>

    <div class="chapter airport_destination_2">
      <div class="chapter_content content_box">

        <!-- Zurich -->
        <div class="airport_zurich">
          <h2>Von Zürich nach London</h2>
          <p>London und Berlin sind die europäischen Top-Destinationen, welche vom Flughafen Zürich aus angeflogen werden. Über 850'000 Personen haben die englische Hauptstadt besucht. Nach Berlin zog es über 540'000 Personen. Übersee sind New York und Dubai die beliebtesten Reiseziele.</p>
          <p><img src="img/airport_target_zurich.png" class="imagecenter"></p>
        </div>

        <!-- Bale -->
        <div class="airport_bale">
          <h2>Von Basel nach Algier</h2>
          <p>London und Berlin sind die europäischen Top-Destinationen, welche vom Flughafen Basel-Mulhouse aus angeflogen werden. Über 270'000 Personen haben die englische Hauptstadt besucht. Nach Berlin zog es über 540'000 Personen. Übersee liegt Algier, die Hauptstadt Algeriens, gefolgt von Tel Aviv und Marrakesch auf den Top-Plätzen.</p>
          <p><img src="img/airport_target_bale.png" class="imagecenter"></p>
        </div>

        <!-- Geneva -->
        <div class="airport_geneva">
          <h2>Von Genf nach Dubai</h2>
          <p>London und Paris sind die europäischen Top-Destinationen, welche vom Flughafen Genf aus angeflogen werden. Über eine Million Personen haben die englische Hauptstadt besucht. Nach Paris zog es über 530'000 Personen. Übersee sind Dubai und New York die beliebtesten Reiseziele.</p>
          <p><img src="img/airport_target_geneva.png" class="imagecenter"></p>
        </div>

      </div>
    </div>


    <div class="chapter">
      <div class="chapter_content content_box airways_intro">
        <h2>Geordnetes Chaos</h2>
        
        <span class="has_place">Werfen wir nun einen Blick in den Himmel über {place_name}.</span>
        <span class="has_no_place">Werfen wir nun einen Blick in den Himmel.</span>
        Verschiedene Luftstrassen führen in die weite Welt hinaus.
        Am nächsten liegt die <b>{airway_1_name}</b>. Nur etwa {airway_1_distance}km entfernt ist sie. Auch die <b>{airway_2_name}</b> liegt mit {airway_2_distance}km in Ihrer Nähe. Auch in Ihrer Umgebung, aber etwas weiter entfernt: Die {airway_3_distance}km entfernt liegende <b>{airway_3_name}</b>.<br />
        Schauen wir uns die drei Strassen genauer an.
      </div>
    </div>

    <div id="chapter_nearest_airway_0" class="chapter chapter_airways_0">
      <div class="chapter_content content_box">
        <h2><span class="label_route">NR</span><span class="route_title">Route 1</span></h2>
        <span class="route_text">Text Route 1</span>
      </div>
    </div>

    <div id="chapter_nearest_airway_1" class="chapter chapter_airways_1">
      <div class="chapter_content content_box">
        <h2><span class="label_route">NR</span><span class="route_title">Route 2</span></h2>
        <span class="route_text">Text Route 1</span>
      </div>
    </div>

    <div id="chapter_nearest_airway_2" class="chapter chapter_airways_2">
      <div class="chapter_content content_box">
        <h2><span class="label_route">NR</span><span class="route_title">Route 3</span></h2>
        <span class="route_text">Text Route 1</span>
      </div>
    </div>

    <div id="chapter_after_airways" class="chapter">
      <div class="chapter_content content_box">
        <h2>Luftrouten</h2>
        Diese Strassen werden in der Schweiz und auch im internationalen Luftverkehr in sogenannten Flight Levels (FL) eingeteilt. Wie auf einer unsichtbaren Autobahn reihen sich Flugzeuge auf einem ihnen zugewiesenen Flight Level in die Luftroute ein. Die Mindestabstände (Staffelungen) dürfen keinesfalls unterschritten werden, die geflogenen Abstände sind aber in den allermeisten Fällen viel grösser.
        <p><img src="img/flightlevels.png" class="imagecenter"></p>
      </div>
    </div>

    <div class="chapter">
      <div class="chapter_content content_box">
        <h2>Luftrouten</h2>
        Für Ordnung am Himmel sorgen verschiedene Fluglotsen. Jährlich überwachen sie rund 1,2 Millionen Flugzeuge im Schweizer und im angrenzenden Luftraum. Bei uns ist diese Aufgabe besonders komplex, denn der Luftraum ist dicht beflogen und rund zwei Drittel aller Flüge befinden sich im Steig- oder Sinkflug.
        <p><img src="img/radarlosten.png" class="imagecenter"></p>
      </div>
    </div>

    <div id="chapter_show_lines" class="chapter">
      <div class="chapter_content content_box">
        <h2>Weben mit Wasserdampf</h2>
        Dieses Gewimmel am Himmel zeigt sich eindrücklich, wenn wir die Kondensstreifen aller Flugzeuge eines ganzen Tages am Himmel stehen lassen. Ein dicht gewobenes Netz überzieht nun den gesammten Schweizer Luftraum.
      </div>
    </div>

    <div id="chapter_load_heatmap" class="chapter">
      <div class="chapter_content content_box">
        Nachdem tausende Passagiere von Zürich, Genf, Basel-Mulhouse oder kleineren Flughäfen abgefertigt wurde, neigt sich unser Tag dem Ende zu. Das dichte Netz der Flugbewegungen eines vollen Tages sehen wir jetzt aus der Vogelperspektive. Rote Gebiete bedeuten, dass da besonders viele Flugzeuge durchgeflogen sind. Sie können die Karte nun selbst entdecken. Bewegen und zoomen Sie Karte, nach dem Sie den Entdecker-Modus eingeschaltet haben.
        <button>Entdecker-Modus einschalten</button>
      </div>
    </div>
  </div>

  <div id="mapstart" class="map">
    <div id="target">
      <span id="setPosition">Mit dieser Position starten</span>
    </div>
  </div>

  <div id="mapend" class="map"></div>

  <div id="threejs"></div>

</body>
</html>